{% extends 'base.html.twig' %}

{% block title %}Oteller{% endblock %}

{% block body %}

    <div class="container">

        <h2>Oteller</h2>

        <!-- form -->

        <div id="hotels" class="row">
            <!-- <div class="col-sm-6 wowload fadeInUp">
                <div class="rooms"><img src="images/photos/8.jpg" class="img-responsive">
                    <div  class="info">
                         Otellerin bilgileri gelecek
                        <h3>Luxirious Suites</h3>
                        <p> Missed lovers way one vanity wishes nay but. Use shy seemed within twenty wished old few regret passed. Absolute one hastened mrs any sensible</p>
                        <a href="{{ path('hotel-details') }}" class="btn btn-default">Ayrıntıya Git</a>
                         Otellerin bilgileri gelecek
                    </div>
                </div>
            </div>
    -->
        </div>
    </div>
{% endblock %}

{% block javascripts %}

    <script language="JavaScript">
        var hotels="";
       $.ajax({
            url:'/get-hotels',
            method:'post',
            success:function (data) {
                putPics(jQuery.parseJSON(data));
                /*var html="";
                hotels= jQuery.parseJSON(data);
                for(var i=0;i<hotels.length;i++){
                    var hotelPic="";
                    $.ajax({
                        url:'/getHotelPics',
                        method:'post',
                        data:{
                            id: hotels[i].id
                        },
                        success:function (data2) {
                                if(jQuery.parseJSON(data2)[0] != undefined){
                                    hotelPic= "http://localhost:8001"+jQuery.parseJSON(data2)[0].url;
                                    html+='<div class="col-sm-6 fadeInUp">'+
                                        ' <div class="rooms"><img src="'+hotelPic+'" class="img-responsive">'+
                                        '<div  class="info">'+
                                         '<h3>'+hotels[i-1].name+'</h3>'+
                                         '<p> '+hotels[i-1].detail+'</p>'+
                                         '<a href="/hotel-details?hotel='+hotels[i-1].id+'" class="btn btn-default">Ayrıntıya Git</a>'
                                    ;
                                    $('#hotels').html(html);
                                }
                        },
                        error:function (data) {
                            console.log(data);
                        }
                    });
                }*/
            },
            error:function (data) {
                console.log(data);
            }
        });

       function putPics(hotels) {
           for(var i=0;i<hotels.length;i++){
               var hotelPic="";
               $.ajax({
                   url:'/getHotelPics',
                   method:'post',
                   data:{
                       id: hotels[i].id
                   },
                   success:function (data2) {
                       if(jQuery.parseJSON(data2)[0] != undefined){
                           for(var k =0;k<i;k++){
                               var html="";
                               hotelPic= "http://localhost:8001"+jQuery.parseJSON(data2)[0].url;
                               html='<div class="col-sm-6 fadeInUp">'+
                                   ' <div class="rooms"><img src="'+hotelPic+'" class="img-responsive">'+
                                   '<div  class="info">'+
                                   '<h3>'+hotels[k].name+'</h3>'+
                                   '<p> '+hotels[k].detail.substr(0,25)+'...</p>'+
                                   '<a href="/hotel-details?hotel='+hotels[k].id+'" class="btn btn-default">Ayrıntıya Git</a>'
                               ;
                               $(html).appendTo('#hotels');
                           }
                       }
                   },
                   error:function (data) {
                       console.log(data);
                   }
               });
           }
       }

    </script>

{% endblock %}
